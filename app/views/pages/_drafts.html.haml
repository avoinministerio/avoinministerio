- [["grid_8", "alpha"], ["grid_8"], ["grid_8", "omega"]][0, [6, items.size].min].each_with_index do |klasses, i|
  %div{:class => klasses}
    - if idea = items[i]
      .popular
        %h3.title=link_to shorten(idea.title, 100, 20, "Â»"), idea_path(idea), id: "ab_section_#{section}_#{i}_link"
        %div{ class: 'grid_8 alpha metadata'}
          .grid_4.alpha
            - if idea.proposal?
              = Idea.human_attribute_name(:collecting_started_date)
              = (l_if(idea.collecting_start_date, {format: :short}) || 'n/a')
            &nbsp;
          %div
            - if idea.proposal? && idea.collecting_end_date.present?
              = Idea.human_attribute_name(:collecting_ended_date)
              = l_if(idea.collecting_end_date, format: :short)
        %div{id: "draft_bar#{idea.id}_#{num = rand(50)}", class: "bar"}
        - for_portion, for_, against_portion, against_ = idea.stats
        - for_length = [35, (280-5-35)*for_portion].max
        :javascript
          var r = Raphael("draft_bar#{idea.id}_#{num}", 280, 20);
          r.rect(  0, 0, #{for_length}, 20).attr({fill: "#8cc63f", stroke: "#fff", strokewidth: 5});
          r.rect(#{for_length+5}, 0, #{280-5-for_length}, 20).attr({fill: "#a9003f", stroke: "#fff", strokewidth: 5});
          r.text( 18,11, "#{for_}").attr({fill: "#fff", "font-size": 12});
          r.text(261,11, "#{against_}").attr({fill: "#fff", "font-size": 12});