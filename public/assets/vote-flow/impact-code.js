var process=function(e){function p(){for(var t in e.authors){var n,r;for(var i=e.buckets.length-1;i>=0;i--){var s=!1;for(var o=0,u=e.buckets[i].i.length;o<u;o++)s=s||e.buckets[i].i[o][0]==t;if(s){r=i;break}}for(var i=0,a=e.buckets.length;i<a;i++){var s=!1;for(var o=0,u=e.buckets[i].i.length;o<u;o++)s=s||e.buckets[i].i[o][0]==t;if(s){n=i;break}}for(var i=n,a=r;i<a;i++){var s=!1;for(var o=0,u=e.buckets[i].i.length;o<u;o++)s=s||e.buckets[i].i[o][0]==t;s||e.buckets[i].i.push([t,0])}}}function d(){var o,a;p();for(var f=0,d=e.buckets.length;f<d;f++){var v=e.buckets[f].i;a=0;for(var m=0,g=v.length;m<g;m++)o=s[v[m][0]],o||(o=s[v[m][0]]={f:[],b:[]}),o.f.push([t,a,v[m][1]]),o.b.unshift([t,a+=Math.max(Math.round(Math.log(v[m][1])/Math.log(1.2)*2.5),1)]),a+=2;var y=new Date(e.buckets[f].d*1e3),b=y.getDate()+"."+(y.getMonth()+1)+"."+y.getFullYear();n.text(t+25,a+10,b).attr({font:'9px "Arial"',stroke:"none",fill:"#aaa"}),t+=100}var w=0;for(var m in s){r[m]=n.set();var E=Raphael.getColor();s[m].p=n.path().attr({fill:E,stroke:E});var S="M".concat(s[m].f[0][0],",",s[m].f[0][1],"L",s[m].f[0][0]+50,",",s[m].f[0][1]),T=Math.round(s[m].f[0][1]+(s[m].b[s[m].b.length-1][1]-s[m].f[0][1])/2+3);r[m].push(n.text(s[m].f[0][0]+25,T,s[m].f[0][2]).attr(i));var N=s[m].f[0][0]+50,C=s[m].f[0][1];for(var f=1,d=s[m].f.length;f<d;f++)S=S.concat("C",N+20,",",C,","),N=s[m].f[f][0],C=s[m].f[f][1],S=S.concat(N-20,",",C,",",N,",",C,"L",N+=50,",",C),T=Math.round(C+(s[m].b[s[m].b.length-1-f][1]-C)/2+3),T-9>C&&r[m].push(n.text(N-25,T,s[m].f[f][2]).attr(i));S=S.concat("L",s[m].b[0][0]+50,",",s[m].b[0][1],",",s[m].b[0][0],",",s[m].b[0][1]);for(var f=1,d=s[m].b.length;f<d;f++)S=S.concat("C",s[m].b[f][0]+70,",",s[m].b[f-1][1],",",s[m].b[f][0]+70,",",s[m].b[f][1],",",s[m].b[f][0]+50,",",s[m].b[f][1],"L",s[m].b[f][0],",",s[m].b[f][1]);s[m].p.attr({path:S+"z"}),r[m].hide();var k=null;(function(t){s[t].p.mouseover(function(){k!=null&&r[k].hide(),k=t,r[t].show(),s[t].p.toFront(),r[t].toFront(),c.innerHTML=e.authors[t].n+" <em>("+e.authors[t].c+" votes, "+e.authors[t].a+" for, "+e.authors[t].d+" against)</em>",l.style.backgroundColor=s[t].p.attr("fill"),u.className="",h.className="hidden"})})(m)}}var t=0,n=Raphael("chart",2350,550),r={},i={font:'9px "Arial"',stroke:"none",fill:"#fff"},s={},o=$("#name")[0],u=$("#name2")[0],a=$("#legend")[0],f=$("#username")[0],l=$("#legend2")[0],c=$("#username2")[0],h=$("#placeholder")[0];e.error?alert("Project not found. Try again."):d()};$(function(){process(json)});